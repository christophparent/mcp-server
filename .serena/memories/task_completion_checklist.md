# Task Completion Checklist - Agentset MCP

When completing a task in this project, ensure you follow these steps:

## 1. Code Quality
- [ ] Run linter: `pnpm lint`
- [ ] Check code formatting: `pnpm format`
- [ ] Auto-format code: `pnpm format:write`
- [ ] Ensure TypeScript compiles: `pnpm build`

## 2. Testing
- [ ] Run existing tests: `pnpm test`
- [ ] Add new tests if functionality was added
- [ ] Ensure all tests pass
- [ ] Test MCP tool manually if changed

## 3. Type Safety
- [ ] No TypeScript errors
- [ ] Strict type checking passes
- [ ] Zod schemas updated for API changes
- [ ] Declaration files (.d.ts) generated properly

## 4. Documentation
- [ ] Update README.md if user-facing changes
- [ ] Create changeset: `pnpm changeset`
- [ ] Add TSDoc comments for public APIs
- [ ] Update namespace documentation if applicable

## 5. Build & Bundle
- [ ] Test build: `pnpm build`
- [ ] Verify dist/ output is correct
- [ ] Check bundle size if concerned
- [ ] Test with `pnpm inspect`

## 6. Environment & Configuration
- [ ] Update `.env.local.example` if new env vars added
- [ ] Verify no secrets are committed
- [ ] Update CLI arguments documentation if changed
- [ ] Test namespace configurations (EMCO and AHRI)

## 7. Version Management (for releases)
- [ ] Create changeset: `pnpm changeset`
- [ ] Run `pnpm version-packages` when ready
- [ ] Update CHANGELOG.md (auto-generated by changesets)
- [ ] Test package locally before publishing

## 8. Publishing (maintainers only)
- [ ] All checks pass
- [ ] Version bumped via changesets
- [ ] Run `pnpm release` to publish
- [ ] Verify on npm: https://www.npmjs.com/package/@agentset/mcp
- [ ] Tag release in git

## Quick Verification Command
```bash
# Run all quality checks
pnpm lint && pnpm format && pnpm test && pnpm build
```

## Common Task Types

### After Modifying MCP Tools
1. Update tool schemas in src/index.ts
2. Update tool descriptions
3. Test with `pnpm inspect`
4. Verify in Claude Desktop
5. Create changeset for version bump

### After Changing Agentset Integration
1. Test with real Agentset namespace
2. Verify search results
3. Test reranking functionality
4. Check tenant isolation if applicable

### After TypeScript Changes
1. Run `pnpm build` to check compilation
2. Verify type exports in dist/
3. Check declaration maps
4. Test imports in consuming projects

### After Adding CLI Arguments
1. Update commander options in src/index.ts
2. Update src/utils.ts parseOptions function
3. Update README.md usage examples
4. Test all argument combinations

### Before Publishing
1. Run full test suite: `pnpm test`
2. Build production bundle: `pnpm build`
3. Test installed package: `npx @agentset/mcp@latest`
4. Verify namespace scripts work: `pnpm mcp:emco`, `pnpm mcp:ahri`
5. Check package.json files field includes all necessary files
